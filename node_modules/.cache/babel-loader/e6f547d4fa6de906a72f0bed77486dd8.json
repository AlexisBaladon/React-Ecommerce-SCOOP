{"ast":null,"code":"import { collection, getDocs, getFirestore, limit, query } from 'firebase/firestore';\nimport Flavor from '../dataTypes/flavor';\n\nconst createItemAux = document => {\n  let newFlavor = null; //Destructuring\n\n  const [id, title, pictureUrl] = [document.id, document.get(\"title\"), document.get(\"pictureUrl\")]; //If flavors are well defined\n\n  if (title === undefined || pictureUrl === undefined) {\n    throw new Error(\"Par치metros de items de base de datos err칩neos\");\n  } else {\n    newFlavor = new Flavor(id, title, pictureUrl);\n  }\n\n  return newFlavor;\n};\n\nconst getFlavors = setFlavors => {\n  const db = getFirestore();\n  const itemCollection = query(collection(db, \"flavors\"));\n  getDocs(itemCollection).then(snapshot => {\n    const newFlavor = snapshot.docs.map(doc => {\n      return createItemAux(doc);\n    });\n    setFlavors(newFlavor);\n  });\n};\n\nconst getNumberOfFlavors = recipienteId => {\n  let numberOfFlavors = 0;\n  const db = getFirestore();\n  const itemCollection = query(collection(db, \"numberOfFlavors\"), limit(1));\n  getDocs(itemCollection).then(snapshot => {\n    var _snapshot$docs$;\n\n    console.log(snapshot.docs);\n    const amount = (_snapshot$docs$ = snapshot.docs[0]) === null || _snapshot$docs$ === void 0 ? void 0 : _snapshot$docs$.get(\"amount\"); //If documents are well defined\n\n    if (amount === undefined) throw new Error(\"Este documento no presenta campo 'amount'\");else numberOfFlavors = amount;\n    console.log(numberOfFlavors);\n  });\n  return numberOfFlavors;\n};\n\nexport { getFlavors, getNumberOfFlavors };","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/data/flavorHandler.ts"],"names":["collection","getDocs","getFirestore","limit","query","Flavor","createItemAux","document","newFlavor","id","title","pictureUrl","get","undefined","Error","getFlavors","setFlavors","db","itemCollection","then","snapshot","docs","map","doc","getNumberOfFlavors","recipienteId","numberOfFlavors","console","log","amount"],"mappings":"AAAA,SAAQA,UAAR,EAA4EC,OAA5E,EAAqFC,YAArF,EAAmGC,KAAnG,EAAmHC,KAAnH,QAAsI,oBAAtI;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;AAEA,MAAMC,aAAa,GAAIC,QAAD,IAAsD;AAC1E,MAAIC,SAAS,GAAG,IAAhB,CAD0E,CAG1E;;AACA,QAAM,CAACC,EAAD,EAAKC,KAAL,EAAYC,UAAZ,IAEN,CAACJ,QAAQ,CAACE,EAAV,EAAcF,QAAQ,CAACK,GAAT,CAAa,OAAb,CAAd,EAAqCL,QAAQ,CAACK,GAAT,CAAa,YAAb,CAArC,CAFA,CAJ0E,CAQ1E;;AACA,MAAIF,KAAK,KAAKG,SAAV,IAAuBF,UAAU,KAAKE,SAA1C,EAAqD;AACnD,UAAM,IAAIC,KAAJ,CAAU,+CAAV,CAAN;AACD,GAFD,MAGK;AACHN,IAAAA,SAAS,GAAG,IAAIH,MAAJ,CAAWI,EAAX,EAAeC,KAAf,EAAsBC,UAAtB,CAAZ;AACD;;AAED,SAAOH,SAAP;AACD,CAjBD;;AAmBA,MAAMO,UAAU,GAAIC,UAAD,IAAgD;AACjE,QAAMC,EAAE,GAAGf,YAAY,EAAvB;AACA,QAAMgB,cAAc,GAAGd,KAAK,CAACJ,UAAU,CAACiB,EAAD,EAAI,SAAJ,CAAX,CAA5B;AAEAhB,EAAAA,OAAO,CAACiB,cAAD,CAAP,CAAwBC,IAAxB,CAA6BC,QAAQ,IAAI;AACvC,UAAMZ,SAAS,GAAGY,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkBC,GAAG,IAAI;AACzC,aAAOjB,aAAa,CAACiB,GAAD,CAApB;AACD,KAFiB,CAAlB;AAGAP,IAAAA,UAAU,CAACR,SAAD,CAAV;AACD,GALD;AAMD,CAVD;;AAYA,MAAMgB,kBAAkB,GAAIC,YAAD,IAAkC;AAC3D,MAAIC,eAAuB,GAAG,CAA9B;AACA,QAAMT,EAAE,GAAGf,YAAY,EAAvB;AACA,QAAMgB,cAAc,GAAGd,KAAK,CAACJ,UAAU,CAACiB,EAAD,EAAI,iBAAJ,CAAX,EAAmCd,KAAK,CAAC,CAAD,CAAxC,CAA5B;AAEAF,EAAAA,OAAO,CAACiB,cAAD,CAAP,CAAwBC,IAAxB,CAA6BC,QAAQ,IAAI;AAAA;;AACvCO,IAAAA,OAAO,CAACC,GAAR,CAAYR,QAAQ,CAACC,IAArB;AACE,UAAMQ,MAA0B,sBAAGT,QAAQ,CAACC,IAAT,CAAc,CAAd,CAAH,oDAAG,gBAAkBT,GAAlB,CAAsB,QAAtB,CAAnC,CAFqC,CAIrC;;AACA,QAAIiB,MAAM,KAAKhB,SAAf,EAA0B,MAAM,IAAIC,KAAJ,CAAU,2CAAV,CAAN,CAA1B,KACKY,eAAe,GAAGG,MAAlB;AACLF,IAAAA,OAAO,CAACC,GAAR,CAAYF,eAAZ;AACH,GARD;AAUA,SAAOA,eAAP;AACD,CAhBD;;AAkBE,SAAQX,UAAR,EAAoBS,kBAApB","sourcesContent":["import {collection, doc, DocumentData, DocumentSnapshot, Firestore, getDoc, getDocs, getFirestore, limit, orderBy, query, where} from 'firebase/firestore';\r\nimport Flavor from '../dataTypes/flavor';\r\n\r\nconst createItemAux = (document: DocumentSnapshot<DocumentData>): Flavor => {\r\n  let newFlavor = null;\r\n\r\n  //Destructuring\r\n  const [id, title, pictureUrl]: \r\n  [string | undefined, string | undefined, string | undefined] =\r\n  [document.id, document.get(\"title\"), document.get(\"pictureUrl\")]\r\n\r\n  //If flavors are well defined\r\n  if (title === undefined || pictureUrl === undefined) {\r\n    throw new Error(\"Par치metros de items de base de datos err칩neos\");\r\n  }\r\n  else {\r\n    newFlavor = new Flavor(id, title, pictureUrl);\r\n  }\r\n\r\n  return newFlavor;\r\n}\r\n\r\nconst getFlavors = (setFlavors: (item: Flavor[]) => void): void => {\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"flavors\"));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    const newFlavor = snapshot.docs.map(doc => {\r\n      return createItemAux(doc);\r\n    })\r\n    setFlavors(newFlavor);\r\n  })\r\n}\r\n\r\nconst getNumberOfFlavors = (recipienteId: string): number => {\r\n  let numberOfFlavors: number = 0;\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"numberOfFlavors\"), limit(1));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    console.log(snapshot.docs)\r\n      const amount: number | undefined = snapshot.docs[0]?.get(\"amount\");\r\n      \r\n      //If documents are well defined\r\n      if (amount === undefined) throw new Error(\"Este documento no presenta campo 'amount'\");\r\n      else numberOfFlavors = amount;\r\n      console.log(numberOfFlavors)\r\n  })\r\n  \r\n  return numberOfFlavors;\r\n}\r\n\r\n  export {getFlavors, getNumberOfFlavors};"]},"metadata":{},"sourceType":"module"}