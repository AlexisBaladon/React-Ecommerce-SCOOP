{"ast":null,"code":"import _slicedToArray from\"F:\\\\reactApp\\\\heladeria-e-commerce-baladon\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useRef,useState,useContext}from'react';import{Alert,Button,CloseButton,Form,ListGroup,Modal}from'react-bootstrap';import{CartContext}from'../../context/cartContext';import'./purchaseModal.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PurchaseModal=function PurchaseModal(_ref){var show=_ref.show,onHide=_ref.onHide,confirmPurchase=_ref.confirmPurchase;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),alertMessage=_useState2[0],setAlertMessage=_useState2[1];var phoneRef=useRef(null);var countryRef=useRef(null);var cityRef=useRef(null);var postalCodeRef=useRef(null);var paymentMethodRef=useRef(null);// Handlers\nvar handleHide=function handleHide(){setAlertMessage(null);onHide();};var handleSubmit=function handleSubmit(e){//Prevents page reload\ne.preventDefault();try{var _phoneRef$current,_countryRef$current,_cityRef$current,_postalCodeRef$curren,_paymentMethodRef$cur;//Ref destructuring\nvar phone=phoneRef===null||phoneRef===void 0?void 0:(_phoneRef$current=phoneRef.current)===null||_phoneRef$current===void 0?void 0:_phoneRef$current.value,country=(_countryRef$current=countryRef.current)===null||_countryRef$current===void 0?void 0:_countryRef$current.value,city=(_cityRef$current=cityRef.current)===null||_cityRef$current===void 0?void 0:_cityRef$current.value,postalCode=(_postalCodeRef$curren=postalCodeRef.current)===null||_postalCodeRef$curren===void 0?void 0:_postalCodeRef$curren.value,paymentMethod=(_paymentMethodRef$cur=paymentMethodRef.current)===null||_paymentMethodRef$cur===void 0?void 0:_paymentMethodRef$cur.value;if(phone===undefined)throw new Error(\"El campo de Teléfono debe ser completado.\");if(country===undefined)throw new Error(\"El campo de País debe ser completado.\");if(city===undefined)throw new Error(\"El campo de Ciudad debe ser completado.\");if(postalCode===undefined)throw new Error(\"El campo de Código Postal debe ser completado.\");if(paymentMethod===undefined)throw new Error(\"El campo de Método de pago debe ser completado.\");//signup(email, password1);\nsetAlertMessage({message:\"Compra realizada! Su pedido llegará en menos de 30 minutos a la direción indicada.\",variant:\"success\"});}catch(err){if(err instanceof Error){setAlertMessage({message:err.message,variant:\"danger\"});}}};var cartContext=useContext(CartContext);var items=cartContext.items;return/*#__PURE__*/_jsxs(Modal,{id:\"modal-purchase\",show:show,\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsxs(Modal.Header,{id:\"header-purchase\",children:[/*#__PURE__*/_jsx(Modal.Title,{children:\" Confirmar compra \"}),/*#__PURE__*/_jsx(CloseButton,{variant:\"white\",onClick:handleHide})]}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"my-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Tel\\xE9fono \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",ref:phoneRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"my-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Pa\\xEDs \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:countryRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"my-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Ciudad \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:cityRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"my-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" C\\xF3digo postal \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",ref:postalCodeRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"my-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Forma de pago \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",ref:paymentMethodRef,value:\"Efectivo\",required:true,disabled:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"my-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Productos agregados: \"}),/*#__PURE__*/_jsx(ListGroup,{className:\"my-2 product-list-purchase-modal\",children:items.map(function(it){return/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"item-purchase-modal justify-content-between\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[it.amount,\" x\"]}),/*#__PURE__*/_jsx(\"h6\",{children:it.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-price-purchase-modal\",children:[it.price,\"US$\"]})]},it.id+it.title);})}),/*#__PURE__*/_jsxs(Form.Label,{className:\"w-100 my-3 justify-content-center\",style:{display:\"inline-flex\"},children:[\"Total: \",/*#__PURE__*/_jsxs(\"h5\",{id:\"total-cost-purchase-modal\",className:\"mx-1\",children:[cartContext.getTotalCost(),\"US$\"]})]})]}),alertMessage&&/*#__PURE__*/_jsx(Alert,{variant:alertMessage.variant,children:alertMessage.message}),/*#__PURE__*/_jsx(Button,{className:\"button-purchase-modal w-100\",type:\"submit\",onClick:confirmPurchase,children:\"Confirmar compra\"})]})})]});};export default PurchaseModal;","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/components/cart/purchaseModal.tsx"],"names":["React","useRef","useState","useContext","Alert","Button","CloseButton","Form","ListGroup","Modal","CartContext","PurchaseModal","show","onHide","confirmPurchase","alertMessage","setAlertMessage","phoneRef","countryRef","cityRef","postalCodeRef","paymentMethodRef","handleHide","handleSubmit","e","preventDefault","phone","current","value","country","city","postalCode","paymentMethod","undefined","Error","message","variant","err","cartContext","items","map","it","amount","title","price","id","display","getTotalCost"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useContext } from 'react'\r\nimport { Alert, Button, CloseButton, Form, ListGroup, Modal, Row } from 'react-bootstrap';\r\nimport { CartContext } from '../../context/cartContext';\r\n\r\nimport './purchaseModal.css'\r\n\r\ninterface IProps {\r\n  show: boolean;\r\n  onHide: () => any;\r\n  confirmPurchase: () => any;\r\n}\r\n\r\nconst PurchaseModal: React.FC<IProps> = ({show, onHide, confirmPurchase}) => {\r\n\r\n  interface IAlert {\r\n    message: string;\r\n    variant: string;\r\n  }\r\n\r\n  const [alertMessage, setAlertMessage] = useState<IAlert | null>(null);\r\n  const phoneRef         = useRef<HTMLInputElement>(null);\r\n  const countryRef       = useRef<HTMLInputElement>(null);\r\n  const cityRef          = useRef<HTMLInputElement>(null);\r\n  const postalCodeRef    = useRef<HTMLInputElement>(null);\r\n  const paymentMethodRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Handlers\r\n  const handleHide = () => {\r\n    setAlertMessage(null);\r\n    onHide();\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    //Prevents page reload\r\n    e.preventDefault();\r\n \r\n    try {\r\n      //Ref destructuring\r\n      const [phone, country, city, postalCode, paymentMethod]: \r\n            [string | undefined, string | undefined, string | undefined, string | undefined, string | undefined] = \r\n            [phoneRef?.current?.value, countryRef.current?.value, cityRef.current?.value, postalCodeRef.current?.value, paymentMethodRef.current?.value];\r\n\r\n      if (phone          === undefined) throw new Error(\"El campo de Teléfono debe ser completado.\");\r\n      if (country        === undefined) throw new Error(\"El campo de País debe ser completado.\");\r\n      if (city           === undefined) throw new Error(\"El campo de Ciudad debe ser completado.\");\r\n      if (postalCode     === undefined) throw new Error(\"El campo de Código Postal debe ser completado.\");\r\n      if (paymentMethod  === undefined) throw new Error(\"El campo de Método de pago debe ser completado.\");\r\n\r\n      //signup(email, password1);\r\n      setAlertMessage({message: \"Compra realizada! Su pedido llegará en menos de 30 minutos a la direción indicada.\", \r\n                       variant: \"success\"});\r\n    }\r\n    catch(err: any) {\r\n      if (err instanceof Error) {\r\n        setAlertMessage({message: err.message, variant: \"danger\"});\r\n      }\r\n    }\r\n  }\r\n\r\n  const cartContext = useContext(CartContext);\r\n  const items = cartContext.items;\r\n\r\n  return <Modal id=\"modal-purchase\"\r\n                show={show}\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered>\r\n      <Modal.Header id=\"header-purchase\">\r\n        <Modal.Title> Confirmar compra </Modal.Title>\r\n        <CloseButton variant=\"white\" onClick={handleHide} />\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Form onSubmit={handleSubmit}>\r\n          <Form.Group className=\"my-2\">\r\n            <Form.Label> Teléfono </Form.Label>\r\n            <Form.Control type=\"number\" ref={phoneRef} required></Form.Control>\r\n          </Form.Group>\r\n          <Form.Group className=\"my-2\">\r\n            <Form.Label> País </Form.Label>\r\n            <Form.Control type=\"text\" ref={countryRef} required></Form.Control>\r\n          </Form.Group>\r\n          <Form.Group className=\"my-2\">\r\n            <Form.Label> Ciudad </Form.Label>\r\n            <Form.Control type=\"text\" ref={cityRef} required></Form.Control>\r\n          </Form.Group>\r\n          <Form.Group className=\"my-2\">\r\n            <Form.Label> Código postal </Form.Label>\r\n            <Form.Control type=\"number\" ref={postalCodeRef} required></Form.Control>\r\n          </Form.Group>\r\n          <Form.Group className=\"my-2\">\r\n            <Form.Label> Forma de pago </Form.Label>\r\n            <Form.Control type=\"text\" ref={paymentMethodRef} value={\"Efectivo\"} required disabled></Form.Control>\r\n          </Form.Group>\r\n          <Form.Group className=\"my-2\">\r\n            <Form.Label> Productos agregados: </Form.Label>\r\n              <ListGroup className=\"my-2 product-list-purchase-modal\">\r\n                {items.map(it =>\r\n                  <ListGroup.Item key={it.id + it.title} className=\"item-purchase-modal justify-content-between\">\r\n                    <p >{it.amount} x</p>  \r\n                    <h6 >{it.title}</h6> \r\n                    <p className=\"item-price-purchase-modal\">{it.price}US$</p>\r\n                  </ListGroup.Item>\r\n                )}\r\n              </ListGroup>\r\n            <Form.Label className=\"w-100 my-3 justify-content-center\" style={{display: \"inline-flex\"}}>\r\n              Total: <h5 id=\"total-cost-purchase-modal\" className=\"mx-1\">{cartContext.getTotalCost()}US$</h5>\r\n            </Form.Label>\r\n          </Form.Group>\r\n          {alertMessage && <Alert variant={alertMessage.variant}>{alertMessage.message}</Alert>}\r\n          <Button className=\"button-purchase-modal w-100\" type=\"submit\" onClick={confirmPurchase}>Confirmar compra</Button>\r\n        </Form>\r\n      </Modal.Body>\r\n  </Modal>\r\n}\r\n\r\nexport default PurchaseModal;"]},"metadata":{},"sourceType":"module"}