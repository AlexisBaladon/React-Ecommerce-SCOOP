{"ast":null,"code":"import { collection, getDocs, getFirestore, limit, query, where } from 'firebase/firestore';\nimport Flavor from '../dataTypes/flavor';\n\nconst createItemAux = document => {\n  let newFlavor = null; //Destructuring\n\n  const [id, title, pictureUrl] = [document.id, document.get(\"title\"), document.get(\"pictureUrl\")]; //If flavors are well defined\n\n  if (title === undefined || pictureUrl === undefined) {\n    throw new Error(\"Par치metros de items de base de datos err칩neos\");\n  } else {\n    newFlavor = new Flavor(id, title, pictureUrl);\n  }\n\n  return newFlavor;\n};\n\nconst getFlavors = setFlavors => {\n  const db = getFirestore();\n  const itemCollection = query(collection(db, \"flavors\"));\n  getDocs(itemCollection).then(snapshot => {\n    const newFlavor = snapshot.docs.map(doc => {\n      return createItemAux(doc);\n    });\n    setFlavors(newFlavor);\n  });\n};\n\nconst getNumberOfFlavors = recipienteId => {\n  let numberOfItems = 0;\n  const db = getFirestore();\n  const itemCollection = query(collection(db, \"flavors\"), where(\"recipienteID\", \"==\", recipienteId), limit(1));\n  getDocs(itemCollection).then(snapshot => {\n    var _snapshot$docs$;\n\n    const amount = (_snapshot$docs$ = snapshot.docs[0]) === null || _snapshot$docs$ === void 0 ? void 0 : _snapshot$docs$.get(\"amount\"); //If documents are well defined\n\n    if (amount === undefined) throw new Error(\"Este documento no presenta campo 'amount'\");else numberOfItems = amount;\n  });\n  return numberOfItems;\n};\n\nexport { getFlavors, getNumberOfFlavors };","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/data/flavorHandler.ts"],"names":["collection","getDocs","getFirestore","limit","query","where","Flavor","createItemAux","document","newFlavor","id","title","pictureUrl","get","undefined","Error","getFlavors","setFlavors","db","itemCollection","then","snapshot","docs","map","doc","getNumberOfFlavors","recipienteId","numberOfItems","amount"],"mappings":"AAAA,SAAQA,UAAR,EAA4EC,OAA5E,EAAqFC,YAArF,EAAmGC,KAAnG,EAAmHC,KAAnH,EAA0HC,KAA1H,QAAsI,oBAAtI;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;AAEA,MAAMC,aAAa,GAAIC,QAAD,IAAsD;AAC1E,MAAIC,SAAS,GAAG,IAAhB,CAD0E,CAG1E;;AACA,QAAM,CAACC,EAAD,EAAKC,KAAL,EAAYC,UAAZ,IAEN,CAACJ,QAAQ,CAACE,EAAV,EAAcF,QAAQ,CAACK,GAAT,CAAa,OAAb,CAAd,EAAqCL,QAAQ,CAACK,GAAT,CAAa,YAAb,CAArC,CAFA,CAJ0E,CAQ1E;;AACA,MAAIF,KAAK,KAAKG,SAAV,IAAuBF,UAAU,KAAKE,SAA1C,EAAqD;AACnD,UAAM,IAAIC,KAAJ,CAAU,+CAAV,CAAN;AACD,GAFD,MAGK;AACHN,IAAAA,SAAS,GAAG,IAAIH,MAAJ,CAAWI,EAAX,EAAeC,KAAf,EAAsBC,UAAtB,CAAZ;AACD;;AAED,SAAOH,SAAP;AACD,CAjBD;;AAmBA,MAAMO,UAAU,GAAIC,UAAD,IAAgD;AACjE,QAAMC,EAAE,GAAGhB,YAAY,EAAvB;AACA,QAAMiB,cAAc,GAAGf,KAAK,CAACJ,UAAU,CAACkB,EAAD,EAAI,SAAJ,CAAX,CAA5B;AAEAjB,EAAAA,OAAO,CAACkB,cAAD,CAAP,CAAwBC,IAAxB,CAA6BC,QAAQ,IAAI;AACvC,UAAMZ,SAAS,GAAGY,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkBC,GAAG,IAAI;AACzC,aAAOjB,aAAa,CAACiB,GAAD,CAApB;AACD,KAFiB,CAAlB;AAGAP,IAAAA,UAAU,CAACR,SAAD,CAAV;AACD,GALD;AAMD,CAVD;;AAYA,MAAMgB,kBAAkB,GAAIC,YAAD,IAAkC;AAC3D,MAAIC,aAAqB,GAAG,CAA5B;AACA,QAAMT,EAAE,GAAGhB,YAAY,EAAvB;AACA,QAAMiB,cAAc,GAAGf,KAAK,CAACJ,UAAU,CAACkB,EAAD,EAAI,SAAJ,CAAX,EAA2Bb,KAAK,CAAC,cAAD,EAAgB,IAAhB,EAAqBqB,YAArB,CAAhC,EAAoEvB,KAAK,CAAC,CAAD,CAAzE,CAA5B;AAEAF,EAAAA,OAAO,CAACkB,cAAD,CAAP,CAAwBC,IAAxB,CAA6BC,QAAQ,IAAI;AAAA;;AACrC,UAAMO,MAA0B,sBAAGP,QAAQ,CAACC,IAAT,CAAc,CAAd,CAAH,oDAAG,gBAAkBT,GAAlB,CAAsB,QAAtB,CAAnC,CADqC,CAGrC;;AACA,QAAIe,MAAM,KAAKd,SAAf,EAA0B,MAAM,IAAIC,KAAJ,CAAU,2CAAV,CAAN,CAA1B,KACKY,aAAa,GAAGC,MAAhB;AACR,GAND;AAQA,SAAOD,aAAP;AACD,CAdD;;AAgBE,SAAQX,UAAR,EAAoBS,kBAApB","sourcesContent":["import {collection, doc, DocumentData, DocumentSnapshot, Firestore, getDoc, getDocs, getFirestore, limit, orderBy, query, where} from 'firebase/firestore';\r\nimport Flavor from '../dataTypes/flavor';\r\n\r\nconst createItemAux = (document: DocumentSnapshot<DocumentData>): Flavor => {\r\n  let newFlavor = null;\r\n\r\n  //Destructuring\r\n  const [id, title, pictureUrl]: \r\n  [string | undefined, string | undefined, string | undefined] =\r\n  [document.id, document.get(\"title\"), document.get(\"pictureUrl\")]\r\n\r\n  //If flavors are well defined\r\n  if (title === undefined || pictureUrl === undefined) {\r\n    throw new Error(\"Par치metros de items de base de datos err칩neos\");\r\n  }\r\n  else {\r\n    newFlavor = new Flavor(id, title, pictureUrl);\r\n  }\r\n\r\n  return newFlavor;\r\n}\r\n\r\nconst getFlavors = (setFlavors: (item: Flavor[]) => void): void => {\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"flavors\"));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    const newFlavor = snapshot.docs.map(doc => {\r\n      return createItemAux(doc);\r\n    })\r\n    setFlavors(newFlavor);\r\n  })\r\n}\r\n\r\nconst getNumberOfFlavors = (recipienteId: string): number => {\r\n  let numberOfItems: number = 0;\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"flavors\"), where(\"recipienteID\",\"==\",recipienteId), limit(1));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n      const amount: number | undefined = snapshot.docs[0]?.get(\"amount\");\r\n\r\n      //If documents are well defined\r\n      if (amount === undefined) throw new Error(\"Este documento no presenta campo 'amount'\");\r\n      else numberOfItems = amount;\r\n  })\r\n\r\n  return numberOfItems\r\n}\r\n\r\n  export {getFlavors, getNumberOfFlavors};"]},"metadata":{},"sourceType":"module"}