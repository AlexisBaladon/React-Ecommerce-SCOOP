{"ast":null,"code":"import _slicedToArray from\"F:\\\\reactApp\\\\heladeria-e-commerce-baladon\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var CartContext=/*#__PURE__*/React.createContext({items:[],addItem:function addItem(it){},deleteItem:function deleteItem(it){},deleteAllItems:function deleteAllItems(){},isInCart:function isInCart(id,pd){return false;},amountInCart:function amountInCart(itemId){return 0;},getNumberOfProducts:function getNumberOfProducts(){return 0;},getTotalCost:function getTotalCost(){return 0;}});var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];var addItem=function addItem(newItem){if(cartItems.some(function(it){return it.sameProductAs(newItem);})){throw new Error('Este item ya ha sido agregado previamente!');}else{var cartItemsAux=cartItems;cartItemsAux.push(newItem);setCartItems(cartItemsAux.slice());}};var deleteItem=function deleteItem(deletedItem){setCartItems(cartItems.filter(function(it){return!(it.equals(deletedItem)&&it.sameProductAs(deletedItem));}));};var deleteAllItems=function deleteAllItems(){setCartItems([]);};var isInCart=function isInCart(itemId,productDetail){return cartItems.some(function(it){return it.id===itemId&&it.sameDetails(productDetail);});};var amountInCart=function amountInCart(itemId){var res=0;cartItems.forEach(function(it){if(it.id===itemId)res+=it.amount;});return res;};var getNumberOfProducts=function getNumberOfProducts(){var amountItems=0;cartItems.forEach(function(it){amountItems+=it.amount;});return amountItems;};var getTotalCost=function getTotalCost(){var res=0;cartItems.forEach(function(ci){return res+=ci.amount*ci.price;});return res;};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{items:cartItems,addItem:addItem,deleteItem:deleteItem,deleteAllItems:deleteAllItems,isInCart:isInCart,amountInCart:amountInCart,getNumberOfProducts:getNumberOfProducts,getTotalCost:getTotalCost},children:children});};export{CartProvider,CartContext};","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/context/cartContext.tsx"],"names":["React","useState","CartContext","createContext","items","addItem","it","deleteItem","deleteAllItems","isInCart","id","pd","amountInCart","itemId","getNumberOfProducts","getTotalCost","CartProvider","children","cartItems","setCartItems","newItem","some","sameProductAs","Error","cartItemsAux","push","slice","deletedItem","filter","equals","productDetail","sameDetails","res","forEach","amount","amountItems","ci","price"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\n\r\nimport ItemTicket from '../dataTypes/itemTicket';\r\nimport ProductDetail from '../dataTypes/ProductDetail';\r\n\r\nconst CartContext = React.createContext<{\r\n    items: ItemTicket[],\r\n    addItem(it: ItemTicket): void,\r\n    deleteItem(it: ItemTicket): void, \r\n    deleteAllItems(): void, \r\n    isInCart(id: string, pd: ProductDetail): boolean,\r\n    amountInCart(itemId: string): number,\r\n    getNumberOfProducts(): number,\r\n    getTotalCost(): number,\r\n  }>\r\n\r\n  //default values                                    \r\n  ({items: [],\r\n    addItem: (it:ItemTicket)=>{},\r\n    deleteItem: (it:ItemTicket)=>{},\r\n    deleteAllItems: () => {},\r\n    isInCart: (id: string, pd: ProductDetail) => false,\r\n    amountInCart: (itemId: string) => 0,\r\n    getNumberOfProducts: () => 0,\r\n    getTotalCost: () => 0,\r\n  });\r\n\r\n\r\nconst CartProvider: React.FC<{}> = ({children}) => {\r\n  const [cartItems, setCartItems] = useState<ItemTicket[]>([]);\r\n\r\n  const addItem = (newItem: ItemTicket): void => {\r\n    if (cartItems.some(it => it.sameProductAs(newItem))) {\r\n      throw new Error('Este item ya ha sido agregado previamente!');\r\n    }\r\n    else {\r\n      let cartItemsAux = cartItems;\r\n      cartItemsAux.push(newItem)\r\n      setCartItems(cartItemsAux.slice());\r\n    }\r\n  }\r\n\r\n  const deleteItem = (deletedItem: ItemTicket): void => {\r\n    setCartItems(cartItems.filter((it: ItemTicket) => {\r\n      return !(it.equals(deletedItem) && it.sameProductAs(deletedItem));\r\n    }));\r\n  }\r\n\r\n  const deleteAllItems = (): void => {\r\n    setCartItems([]);\r\n  }\r\n\r\n  const isInCart = (itemId: string, productDetail: ProductDetail): boolean => {\r\n    return cartItems.some((it) => it.id === itemId && it.sameDetails(productDetail));\r\n  }\r\n\r\n  const amountInCart = (itemId: string): number => {\r\n    let res = 0;\r\n\r\n    cartItems.forEach(it => {\r\n      if (it.id === itemId) res += it.amount;\r\n    })\r\n\r\n    return res;\r\n  }\r\n\r\n  const getNumberOfProducts = (): number => {\r\n    let amountItems = 0;\r\n    cartItems.forEach(it => {amountItems += it.amount});\r\n    return amountItems;\r\n  }\r\n\r\n  const getTotalCost = () => {\r\n    let res = 0;\r\n\r\n    cartItems.forEach((ci) => res += ci.amount*ci.price);\r\n\r\n    return res;\r\n  }\r\n\r\n  return (\r\n    <CartContext.Provider \r\n      value={{items: cartItems,\r\n              addItem: addItem, \r\n              deleteItem:deleteItem,\r\n              deleteAllItems: deleteAllItems, \r\n              isInCart: isInCart,\r\n              amountInCart: amountInCart,\r\n              getNumberOfProducts: getNumberOfProducts,\r\n              getTotalCost: getTotalCost,\r\n             }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  )\r\n}\r\n\r\nexport {CartProvider,CartContext}"]},"metadata":{},"sourceType":"module"}