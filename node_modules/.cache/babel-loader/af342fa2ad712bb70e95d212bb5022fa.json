{"ast":null,"code":"import _slicedToArray from\"F:\\\\reactApp\\\\heladeria-e-commerce-baladon\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useCallback,useEffect,useState}from'react';import Flavor from'../../../../dataTypes/flavor';import ModalRecipientes from'./itemChoserModal';import'./itemChoser.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ItemChooser=function ItemChooser(_ref){var imgWidth=_ref.imgWidth,imgHeight=_ref.imgHeight,itemId=_ref.itemId,maxFlavors=_ref.maxFlavors,flavors=_ref.flavors,selectedFlavors=_ref.selectedFlavors,setSelectedFlavors=_ref.setSelectedFlavors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),changedItemIndex=_useState4[0],setChangedItemIndex=_useState4[1];//Prevents infinite loops inside useEffect\nvar setSelectedFlavorsCallback=useCallback(function(){if(selectedFlavors.length===0)setSelectedFlavors(flavors.slice(0,maxFlavors));},[selectedFlavors.length,setSelectedFlavors,flavors,maxFlavors]);useEffect(function(){setSelectedFlavorsCallback();},[setSelectedFlavorsCallback]);var selectFlavorById=function selectFlavorById(newItemId){var newSelectedItems=selectedFlavors;var newItem=flavors.find(function(i){return i.id===newItemId;});if(newItem instanceof Flavor){newSelectedItems[changedItemIndex]=newItem;//Slice makes a copy of the item, otherwise it will have the same reference\nsetSelectedFlavors(newSelectedItems.slice());}else{console.warn(\"El item cambiado no pudo ser hallado\");}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ModalRecipientes,{items:flavors,show:show,onHide:function onHide(){return setShow(false);},selectItemById:selectFlavorById}),/*#__PURE__*/_jsx(\"div\",{id:\"images-container-item-choser\",style:{width:imgWidth,height:imgHeight,maxHeight:imgHeight},children://Image mapping\nselectedFlavors.map(function(dtItem,i){//Item destructuring\nvar _ref2=[dtItem.pictureUrl,dtItem.title],pictureUrl=_ref2[0],title=_ref2[1];return/*#__PURE__*/_jsx(\"div\",{className:\"img-container-item-choser\",style:{width:100/maxFlavors+\"%\",left:\"\".concat(i*100/maxFlavors,\"%\")},children:/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setShow(true);setChangedItemIndex(i);},children:/*#__PURE__*/_jsx(\"img\",{className:\"img-item-choser\",style:{objectPosition:i*100/(maxFlavors-1)+\"% 0\"},src:pictureUrl,alt:title})})},i);})})]});};export default ItemChooser;","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/components/items/detail/itemChoser/itemChoser.tsx"],"names":["React","useCallback","useEffect","useState","Flavor","ModalRecipientes","ItemChooser","imgWidth","imgHeight","itemId","maxFlavors","flavors","selectedFlavors","setSelectedFlavors","show","setShow","changedItemIndex","setChangedItemIndex","setSelectedFlavorsCallback","length","slice","selectFlavorById","newItemId","newSelectedItems","newItem","find","i","id","console","warn","width","height","maxHeight","map","dtItem","pictureUrl","title","left","objectPosition"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\r\n\r\nimport Flavor from '../../../../dataTypes/flavor';\r\nimport ModalRecipientes from './itemChoserModal';\r\n\r\nimport './itemChoser.css'\r\n\r\n\r\ninterface IProps {\r\n  imgWidth: number;\r\n  imgHeight: number;\r\n  itemId: string;\r\n  maxFlavors: number;\r\n  flavors: Flavor[];\r\n  selectedFlavors: Flavor[];\r\n  setSelectedFlavors: any;\r\n}\r\n\r\nconst ItemChooser: React.FC<IProps> = ({imgWidth, imgHeight, itemId, maxFlavors, flavors, selectedFlavors, setSelectedFlavors}) => {\r\n  const [show, setShow] = useState<boolean>(false);\r\n  const [changedItemIndex, setChangedItemIndex] = useState<number>(0);\r\n  \r\n  //Prevents infinite loops inside useEffect\r\n  const setSelectedFlavorsCallback = useCallback(() => {\r\n    if (selectedFlavors.length === 0) setSelectedFlavors(flavors.slice(0,maxFlavors)) ;\r\n  },[selectedFlavors.length, setSelectedFlavors, flavors, maxFlavors]);\r\n\r\n  useEffect(() => {\r\n    setSelectedFlavorsCallback()\r\n  }, [setSelectedFlavorsCallback])\r\n\r\n  const selectFlavorById = (newItemId: string) => {\r\n    let newSelectedItems = selectedFlavors;\r\n    const newItem = flavors.find(i => i.id === newItemId)\r\n\r\n    if (newItem instanceof Flavor) {\r\n      newSelectedItems[changedItemIndex] = newItem;\r\n      //Slice makes a copy of the item, otherwise it will have the same reference\r\n      setSelectedFlavors(newSelectedItems.slice());\r\n    }\r\n    else {\r\n      console.warn(\"El item cambiado no pudo ser hallado\");\r\n    }\r\n  }\r\n\r\n  return <>\r\n    <ModalRecipientes items={flavors} show={show} onHide={() => setShow(false)}\r\n                      selectItemById={selectFlavorById}/>\r\n    <div id=\"images-container-item-choser\" style={{ width: imgWidth, height: imgHeight, maxHeight: imgHeight}}>\r\n      \r\n      {//Image mapping\r\n      selectedFlavors.map((dtItem, i) => {\r\n\r\n        //Item destructuring\r\n          const [pictureUrl, title]: [string, string] = [dtItem.pictureUrl, dtItem.title];\r\n\r\n          return (\r\n          <div key={i} className=\"img-container-item-choser\"style={{ width: 100/maxFlavors+\"%\",  left: `${i*100/maxFlavors}%`}} >\r\n            <span onClick={() => {setShow(true); setChangedItemIndex(i);}}>\r\n              <img \r\n                  className=\"img-item-choser\"\r\n                  style={{ objectPosition:i*100/(maxFlavors-1)+\"% 0\"}}\r\n                  src={pictureUrl}\r\n                  alt={title}\r\n              />\r\n            </span>\r\n          </div>\r\n      )})}\r\n    </div>\r\n  </>\r\n}\r\n\r\nexport default ItemChooser;"]},"metadata":{},"sourceType":"module"}