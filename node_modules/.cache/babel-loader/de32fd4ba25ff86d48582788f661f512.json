{"ast":null,"code":"import{collection,getDocs,getFirestore,limit,query,where}from'firebase/firestore';import Flavor from'../dataTypes/flavor';var createItemAux=function createItemAux(document){var newFlavor=null;//Destructuring\nvar _ref=[document.id,document.get(\"title\"),document.get(\"pictureUrl\")],id=_ref[0],title=_ref[1],pictureUrl=_ref[2];//If flavors are well defined\nif(title===undefined||pictureUrl===undefined){throw new Error(\"Par치metros de items de base de datos err칩neos\");}else{newFlavor=new Flavor(id,title,pictureUrl);}return newFlavor;};var getFlavors=function getFlavors(setFlavors){var db=getFirestore();var itemCollection=query(collection(db,\"flavors\"));getDocs(itemCollection).then(function(snapshot){var newFlavor=snapshot.docs.map(function(doc){return createItemAux(doc);});setFlavors(newFlavor);});};var getNumberOfFlavors=function getNumberOfFlavors(setAmount,recipienteId){var db=getFirestore();var itemCollection=query(collection(db,\"numberOfFlavors\"),where(\"recipienteID\",\"==\",recipienteId),limit(1));getDocs(itemCollection).then(function(snapshot){var _snapshot$docs$;var amount=(_snapshot$docs$=snapshot.docs[0])===null||_snapshot$docs$===void 0?void 0:_snapshot$docs$.get(\"amount\");//If documents are well defined\nif(amount===undefined)throw new Error(\"Este documento no presenta campo 'amount'\");setAmount(amount);});};export{getFlavors,getNumberOfFlavors};","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/data/flavorHandler.ts"],"names":["collection","getDocs","getFirestore","limit","query","where","Flavor","createItemAux","document","newFlavor","id","get","title","pictureUrl","undefined","Error","getFlavors","setFlavors","db","itemCollection","then","snapshot","docs","map","doc","getNumberOfFlavors","setAmount","recipienteId","amount"],"mappings":"AAAA,OAAQA,UAAR,CAAoDC,OAApD,CAA6DC,YAA7D,CAA2EC,KAA3E,CAAkFC,KAAlF,CAAyFC,KAAzF,KAAqG,oBAArG,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,QAAD,CAAsD,CAC1E,GAAIC,CAAAA,SAAS,CAAG,IAAhB,CAEA;AACA,SAEA,CAACD,QAAQ,CAACE,EAAV,CAAcF,QAAQ,CAACG,GAAT,CAAa,OAAb,CAAd,CAAqCH,QAAQ,CAACG,GAAT,CAAa,YAAb,CAArC,CAFA,CAAOD,EAAP,SAAWE,KAAX,SAAkBC,UAAlB,SAIA;AACA,GAAID,KAAK,GAAKE,SAAV,EAAuBD,UAAU,GAAKC,SAA1C,CAAqD,CACnD,KAAM,IAAIC,CAAAA,KAAJ,CAAU,+CAAV,CAAN,CACD,CAFD,IAGK,CACHN,SAAS,CAAG,GAAIH,CAAAA,MAAJ,CAAWI,EAAX,CAAeE,KAAf,CAAsBC,UAAtB,CAAZ,CACD,CAED,MAAOJ,CAAAA,SAAP,CACD,CAjBD,CAmBA,GAAMO,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,UAAD,CAAgD,CACjE,GAAMC,CAAAA,EAAE,CAAGhB,YAAY,EAAvB,CACA,GAAMiB,CAAAA,cAAc,CAAGf,KAAK,CAACJ,UAAU,CAACkB,EAAD,CAAI,SAAJ,CAAX,CAA5B,CAEAjB,OAAO,CAACkB,cAAD,CAAP,CAAwBC,IAAxB,CAA6B,SAAAC,QAAQ,CAAI,CACvC,GAAMZ,CAAAA,SAAS,CAAGY,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAAAC,GAAG,CAAI,CACzC,MAAOjB,CAAAA,aAAa,CAACiB,GAAD,CAApB,CACD,CAFiB,CAAlB,CAGAP,UAAU,CAACR,SAAD,CAAV,CACD,CALD,EAMD,CAVD,CAYA,GAAMgB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,SAAD,CAAsCC,YAAtC,CAAqE,CAC9F,GAAMT,CAAAA,EAAE,CAAGhB,YAAY,EAAvB,CACA,GAAMiB,CAAAA,cAAc,CAAGf,KAAK,CAACJ,UAAU,CAACkB,EAAD,CAAI,iBAAJ,CAAX,CAAmCb,KAAK,CAAC,cAAD,CAAgB,IAAhB,CAAqBsB,YAArB,CAAxC,CAA4ExB,KAAK,CAAC,CAAD,CAAjF,CAA5B,CAEAF,OAAO,CAACkB,cAAD,CAAP,CAAwBC,IAAxB,CAA6B,SAAAC,QAAQ,CAAI,qBACvC,GAAMO,CAAAA,MAA0B,kBAAGP,QAAQ,CAACC,IAAT,CAAc,CAAd,CAAH,0CAAG,gBAAkBX,GAAlB,CAAsB,QAAtB,CAAnC,CAEA;AACA,GAAIiB,MAAM,GAAKd,SAAf,CAA0B,KAAM,IAAIC,CAAAA,KAAJ,CAAU,2CAAV,CAAN,CAC1BW,SAAS,CAACE,MAAD,CAAT,CACD,CAND,EAOD,CAXD,CAaA,OAAQZ,UAAR,CAAoBS,kBAApB","sourcesContent":["import {collection, DocumentData, DocumentSnapshot, getDocs, getFirestore, limit, query, where} from 'firebase/firestore';\r\nimport Flavor from '../dataTypes/flavor';\r\n\r\nconst createItemAux = (document: DocumentSnapshot<DocumentData>): Flavor => {\r\n  let newFlavor = null;\r\n\r\n  //Destructuring\r\n  const [id, title, pictureUrl]: \r\n  [string | undefined, string | undefined, string | undefined] =\r\n  [document.id, document.get(\"title\"), document.get(\"pictureUrl\")]\r\n\r\n  //If flavors are well defined\r\n  if (title === undefined || pictureUrl === undefined) {\r\n    throw new Error(\"Par치metros de items de base de datos err칩neos\");\r\n  }\r\n  else {\r\n    newFlavor = new Flavor(id, title, pictureUrl);\r\n  }\r\n\r\n  return newFlavor;\r\n}\r\n\r\nconst getFlavors = (setFlavors: (item: Flavor[]) => void): void => {\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"flavors\"));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    const newFlavor = snapshot.docs.map(doc => {\r\n      return createItemAux(doc);\r\n    })\r\n    setFlavors(newFlavor);\r\n  })\r\n}\r\n\r\nconst getNumberOfFlavors = (setAmount: (amount: number) => void, recipienteId: string): void => {\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"numberOfFlavors\"), where(\"recipienteID\",\"==\",recipienteId), limit(1));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    const amount: number | undefined = snapshot.docs[0]?.get(\"amount\");\r\n    \r\n    //If documents are well defined\r\n    if (amount === undefined) throw new Error(\"Este documento no presenta campo 'amount'\");\r\n    setAmount(amount);\r\n  })\r\n}\r\n\r\nexport {getFlavors, getNumberOfFlavors};"]},"metadata":{},"sourceType":"module"}