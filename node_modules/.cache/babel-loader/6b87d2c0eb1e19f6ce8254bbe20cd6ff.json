{"ast":null,"code":"import { collection, getDocs } from 'firebase/firestore';\nimport ItemShowcase from '../dataTypes/itemShowcase';\nlet db;\n\nconst initializeDatabase = database => {\n  db = database;\n};\n\nconst getItems = setItems => {\n  console.log(db);\n  const itemCollection = collection(db, \"items\");\n  getDocs(itemCollection).then(snapshot => {\n    const newItems = snapshot.docs.map(doc => {\n      //Destructuring\n      const [id, title, description, price, pictureUrl, category, stock] = [doc.id, doc.get(\"title\"), doc.get(\"description\"), doc.get(\"price\"), doc.get(\"pictureUrl\"), doc.get(\"type\"), doc.get(\"stock\")]; //If items are well defined\n\n      if (title === undefined || description === undefined || price === undefined || pictureUrl === undefined || category === undefined || stock === undefined) {\n        console.log(id, title, description, price, pictureUrl, category, stock);\n        throw new Error(\"Parámetros de items de base de datos erroneos\");\n      } else {\n        const newItem = new ItemShowcase(id, title, description, price, pictureUrl, category, stock);\n        return newItem; //map return\n      }\n    });\n    setItems(newItems);\n  });\n};\n\nexport { initializeDatabase, getItems };","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/data/itemHandler.ts"],"names":["collection","getDocs","ItemShowcase","db","initializeDatabase","database","getItems","setItems","console","log","itemCollection","then","snapshot","newItems","docs","map","doc","id","title","description","price","pictureUrl","category","stock","get","undefined","Error","newItem"],"mappings":"AAAA,SAAQA,UAAR,EAAoCC,OAApC,QAAgE,oBAAhE;AAEA,OAAOC,YAAP,MAAyB,2BAAzB;AAEA,IAAIC,EAAJ;;AAEA,MAAMC,kBAAkB,GAAIC,QAAD,IAAyB;AAClDF,EAAAA,EAAE,GAAGE,QAAL;AACD,CAFD;;AAIA,MAAMC,QAAQ,GAAIC,QAAD,IAAoD;AACnEC,EAAAA,OAAO,CAACC,GAAR,CAAYN,EAAZ;AACA,QAAMO,cAAc,GAAGV,UAAU,CAACG,EAAD,EAAI,OAAJ,CAAjC;AAEAF,EAAAA,OAAO,CAACS,cAAD,CAAP,CAAwBC,IAAxB,CAA6BC,QAAQ,IAAI;AACvC,UAAMC,QAAQ,GAAGD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkBC,GAAG,IAAI;AACxC;AACA,YAAM,CAACC,EAAD,EAAKC,KAAL,EAAYC,WAAZ,EAAyBC,KAAzB,EAAgCC,UAAhC,EAA4CC,QAA5C,EAAsDC,KAAtD,IAEA,CAACP,GAAG,CAACC,EAAL,EAASD,GAAG,CAACQ,GAAJ,CAAQ,OAAR,CAAT,EAA2BR,GAAG,CAACQ,GAAJ,CAAQ,aAAR,CAA3B,EAAmDR,GAAG,CAACQ,GAAJ,CAAQ,OAAR,CAAnD,EAAqER,GAAG,CAACQ,GAAJ,CAAQ,YAAR,CAArE,EAA4FR,GAAG,CAACQ,GAAJ,CAAQ,MAAR,CAA5F,EAA6GR,GAAG,CAACQ,GAAJ,CAAQ,OAAR,CAA7G,CAFN,CAFwC,CAMxC;;AACA,UAAIN,KAAK,KAAKO,SAAV,IAAuBN,WAAW,KAAKM,SAAvC,IAAoDL,KAAK,KAAKK,SAA9D,IAA2EJ,UAAU,KAAKI,SAA1F,IAAuGH,QAAQ,KAAKG,SAApH,IAAiIF,KAAK,KAAKE,SAA/I,EAA2J;AACvJjB,QAAAA,OAAO,CAACC,GAAR,CAAYQ,EAAZ,EAAeC,KAAf,EAAqBC,WAArB,EAAiCC,KAAjC,EAAuCC,UAAvC,EAAkDC,QAAlD,EAA2DC,KAA3D;AACA,cAAM,IAAIG,KAAJ,CAAU,+CAAV,CAAN;AACH,OAHD,MAIK;AACD,cAAMC,OAAO,GAAG,IAAIzB,YAAJ,CAAiBe,EAAjB,EAAqBC,KAArB,EAA4BC,WAA5B,EAAyCC,KAAzC,EAAgDC,UAAhD,EAA4DC,QAA5D,EAAsEC,KAAtE,CAAhB;AACA,eAAOI,OAAP,CAFC,CAEe;AACnB;AACF,KAfgB,CAAjB;AAgBApB,IAAAA,QAAQ,CAACM,QAAD,CAAR;AACD,GAlBD;AAmBD,CAvBD;;AAyBA,SAAQT,kBAAR,EAA2BE,QAA3B","sourcesContent":["import {collection, doc, Firestore, getDocs, getFirestore} from 'firebase/firestore';\r\nimport Category from '../dataTypes/category';\r\nimport ItemShowcase from '../dataTypes/itemShowcase';\r\n\r\nlet db: Firestore;\r\n\r\nconst initializeDatabase = (database: Firestore) => {\r\n  db = database;\r\n}\r\n\r\nconst getItems = (setItems: (item: ItemShowcase[]) => void): void => {\r\n  console.log(db)\r\n  const itemCollection = collection(db,\"items\");\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    const newItems = snapshot.docs.map(doc => {\r\n      //Destructuring\r\n      const [id, title, description, price, pictureUrl, category, stock]: \r\n            [string, string | undefined, string | undefined, number | undefined, string | undefined, Category | undefined, number | undefined] =\r\n            [doc.id, doc.get(\"title\"), doc.get(\"description\"), doc.get(\"price\"), doc.get(\"pictureUrl\"), doc.get(\"type\"), doc.get(\"stock\")]\r\n      \r\n      //If items are well defined\r\n      if (title === undefined || description === undefined || price === undefined || pictureUrl === undefined || category === undefined || stock === undefined ) {\r\n          console.log(id,title,description,price,pictureUrl,category,stock)\r\n          throw new Error(\"Parámetros de items de base de datos erroneos\");\r\n      }\r\n      else {\r\n          const newItem = new ItemShowcase(id, title, description, price, pictureUrl, category, stock);\r\n          return newItem; //map return\r\n      }\r\n    })\r\n    setItems(newItems);\r\n  })\r\n}\r\n\r\nexport {initializeDatabase,getItems};\r\n\r\n"]},"metadata":{},"sourceType":"module"}