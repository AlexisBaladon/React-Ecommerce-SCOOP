{"ast":null,"code":"import{collection,doc,getDoc,getDocs,getFirestore,orderBy,query,where}from'firebase/firestore';import ItemShowcase from'../dataTypes/itemShowcase';var createItemAux=function createItemAux(document){var newItem=null;//Destructuring\nvar _ref=[document.id,document.get(\"title\"),document.get(\"description\"),document.get(\"price\"),document.get(\"pictureUrl\"),document.get(\"type\"),document.get(\"stock\")],id=_ref[0],title=_ref[1],description=_ref[2],price=_ref[3],pictureUrl=_ref[4],category=_ref[5],stock=_ref[6];//If items are well defined\nif(title===undefined||description===undefined||price===undefined||pictureUrl===undefined||category===undefined||stock===undefined){throw new Error(\"Par치metros de items de base de datos err칩neos\");}else{newItem=new ItemShowcase(id,title,description,price,pictureUrl,category,stock);}return newItem;};var getItem=function getItem(itemId,setItem){var db=getFirestore();var itemRef=doc(db,\"items\",itemId);getDoc(itemRef).then(function(snapshot){if(snapshot.exists()){var _item=createItemAux(snapshot);setItem(_item);}else{throw new Error(\"El item buscado no existe en la base de datos\");}});};var getItems=function getItems(setItems){var db=getFirestore();var itemCollection=query(collection(db,\"items\"),orderBy(\"type\"),orderBy(\"title\"));getDocs(itemCollection).then(function(snapshot){var newItems=snapshot.docs.map(function(doc){return createItemAux(doc);});setItems(newItems);});};var getItemsByCategory=function getItemsByCategory(category,setItems){var db=getFirestore();var itemCollection=query(collection(db,\"items\"),where(\"type\",\"==\",category),orderBy(\"price\"));getDocs(itemCollection).then(function(snapshot){var newItems=snapshot.docs.map(function(doc){return createItemAux(doc);});setItems(newItems);});};export{getItem,getItems,getItemsByCategory};","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/data/itemHandler.ts"],"names":["collection","doc","getDoc","getDocs","getFirestore","orderBy","query","where","ItemShowcase","createItemAux","document","newItem","id","get","title","description","price","pictureUrl","category","stock","undefined","Error","getItem","itemId","setItem","db","itemRef","then","snapshot","exists","item","getItems","setItems","itemCollection","newItems","docs","map","getItemsByCategory"],"mappings":"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","sourcesContent":["import {collection, doc, DocumentData, DocumentSnapshot, getDoc, getDocs, getFirestore, orderBy, query, where} from 'firebase/firestore';\r\nimport Category from '../dataTypes/category';\r\nimport ItemShowcase from '../dataTypes/itemShowcase';\r\n\r\nconst createItemAux = (document: DocumentSnapshot<DocumentData>): ItemShowcase => {\r\n  let newItem = null;\r\n\r\n  //Destructuring\r\n  const [id, title, description, price, pictureUrl, category, stock]: \r\n  [string, string | undefined, string | undefined, number | undefined, string | undefined, Category | undefined, number | undefined] =\r\n  [document.id, document.get(\"title\"), document.get(\"description\"), document.get(\"price\"), document.get(\"pictureUrl\"), document.get(\"type\"), document.get(\"stock\")]\r\n\r\n  //If items are well defined\r\n  if (title === undefined || description === undefined || price === undefined || pictureUrl === undefined || category === undefined || stock === undefined ) {\r\n    throw new Error(\"Par치metros de items de base de datos err칩neos\");\r\n  }\r\n  else {\r\n    newItem = new ItemShowcase(id, title, description, price, pictureUrl, category, stock);\r\n  }\r\n  \r\n  return newItem;\r\n}\r\n\r\nconst getItem = (itemId: string, setItem: (item: ItemShowcase) => void): void => {\r\n  const db = getFirestore()\r\n  const itemRef = doc(db, \"items\", itemId);\r\n\r\n  getDoc(itemRef).then(snapshot => {\r\n    if (snapshot.exists()) {\r\n      const item = createItemAux(snapshot);\r\n      setItem(item);\r\n    }\r\n    else {\r\n      throw new Error(\"El item buscado no existe en la base de datos\")\r\n    }\r\n  })\r\n}\r\n\r\nconst getItems = (setItems: (item: ItemShowcase[]) => void): void => {\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"items\"),orderBy(\"type\"),orderBy(\"title\"));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    const newItems = snapshot.docs.map(doc => {\r\n      return createItemAux(doc);\r\n    })\r\n    setItems(newItems);\r\n  })\r\n}\r\n\r\nconst getItemsByCategory = (category: Category, setItems: (item: ItemShowcase[]) => void): void => {\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"items\"),where(\"type\",\"==\",category),orderBy(\"price\"));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    const newItems = snapshot.docs.map(doc => {\r\n      return createItemAux(doc);\r\n    })\r\n    setItems(newItems);\r\n  })\r\n}\r\n\r\nexport {getItem,getItems,getItemsByCategory};\r\n\r\n"]},"metadata":{},"sourceType":"module"}