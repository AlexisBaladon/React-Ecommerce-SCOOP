{"ast":null,"code":"import _slicedToArray from\"F:\\\\reactApp\\\\heladeria-e-commerce-baladon\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from'react';import{getFlavors,getNumberOfFlavors}from'../../../../data/flavorHandler';import ProductDetailRecipiente from'../../../../dataTypes/ProductDetailRecipiente';import ItemChooser from'./itemChoser';import{jsx as _jsx}from\"react/jsx-runtime\";var ItemChoserContainer=function ItemChoserContainer(_ref){var id=_ref.id,setProductDetail=_ref.setProductDetail;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),flavors=_useState2[0],setFlavors=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedFlavors=_useState4[0],setSelectedFlavors=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),numberOfFlavors=_useState6[0],setNumberOfFlavors=_useState6[1];useEffect(function(){var isMounted=true;var setFlavorsIfMounted=function setFlavorsIfMounted(flavors){if(isMounted)setFlavors(flavors);};var setAmountIfMounted=function setAmountIfMounted(amount){if(isMounted)setNumberOfFlavors(amount);};try{getNumberOfFlavors(setAmountIfMounted,id);getFlavors(setFlavorsIfMounted);}catch(err){if(err instanceof Error){console.warn(err);}}return function(){isMounted=false;};},[id]);//update details according to flavors showed on screen\nuseEffect(function(){//slice passes the value by copy\nsetProductDetail(new ProductDetailRecipiente(selectedFlavors.slice()));},[selectedFlavors,setProductDetail]);return/*#__PURE__*/_jsx(ItemChooser,{maxFlavors:numberOfFlavors,imgWidth:500,imgHeight:500*2/3,itemId:id,flavors:flavors,selectedFlavors:selectedFlavors,setSelectedFlavors:setSelectedFlavors});};export default ItemChoserContainer;","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/components/items/detail/itemChoser/itemChoserContainer.tsx"],"names":["React","useEffect","useState","getFlavors","getNumberOfFlavors","ProductDetailRecipiente","ItemChooser","ItemChoserContainer","id","setProductDetail","flavors","setFlavors","selectedFlavors","setSelectedFlavors","numberOfFlavors","setNumberOfFlavors","isMounted","setFlavorsIfMounted","setAmountIfMounted","amount","err","Error","console","warn","slice"],"mappings":"sIAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,kBAArB,KAA+C,gCAA/C,CAGA,MAAOC,CAAAA,uBAAP,KAAoC,+CAApC,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,C,2CAOA,GAAMC,CAAAA,mBAAqC,CAAG,QAAxCA,CAAAA,mBAAwC,MAA4B,IAA1BC,CAAAA,EAA0B,MAA1BA,EAA0B,CAAtBC,gBAAsB,MAAtBA,gBAAsB,CACxE,cAA8BP,QAAQ,CAAW,EAAX,CAAtC,wCAAOQ,OAAP,eAAgBC,UAAhB,eACA,eAA8CT,QAAQ,CAAW,EAAX,CAAtD,yCAAOU,eAAP,eAAwBC,kBAAxB,eACA,eAA8CX,QAAQ,CAAS,CAAT,CAAtD,yCAAOY,eAAP,eAAwBC,kBAAxB,eAEAd,SAAS,CAAC,UAAM,CACd,GAAIe,CAAAA,SAAS,CAAG,IAAhB,CAEA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACP,OAAD,CAAuB,CACjD,GAAIM,SAAJ,CAAeL,UAAU,CAACD,OAAD,CAAV,CAChB,CAFD,CAIA,GAAMQ,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,MAAD,CAAoB,CAC7C,GAAIH,SAAJ,CAAeD,kBAAkB,CAACI,MAAD,CAAlB,CAChB,CAFD,CAIA,GAAI,CACFf,kBAAkB,CAACc,kBAAD,CAAqBV,EAArB,CAAlB,CACAL,UAAU,CAACc,mBAAD,CAAV,CACD,CACD,MAAMG,GAAN,CAAgB,CACd,GAAIA,GAAG,WAAYC,CAAAA,KAAnB,CAA0B,CACxBC,OAAO,CAACC,IAAR,CAAaH,GAAb,EACD,CACF,CAED,MAAO,WAAM,CAACJ,SAAS,CAAG,KAAZ,CAAkB,CAAhC,CACD,CAtBQ,CAsBN,CAACR,EAAD,CAtBM,CAAT,CAwBA;AACAP,SAAS,CAAC,UAAM,CACd;AACAQ,gBAAgB,CAAC,GAAIJ,CAAAA,uBAAJ,CAA4BO,eAAe,CAACY,KAAhB,EAA5B,CAAD,CAAhB,CACD,CAHQ,CAGN,CAACZ,eAAD,CAAkBH,gBAAlB,CAHM,CAAT,CAKA,mBACE,KAAC,WAAD,EACE,UAAU,CAAEK,eADd,CAEE,QAAQ,CAAE,GAFZ,CAGE,SAAS,CAAE,IAAI,CAAJ,CAAM,CAHnB,CAIE,MAAM,CAAEN,EAJV,CAKE,OAAO,CAAEE,OALX,CAME,eAAe,CAAEE,eANnB,CAOE,kBAAkB,CAAEC,kBAPtB,EADF,CAWD,CA9CD,CAgDA,cAAeN,CAAAA,mBAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { getFlavors, getNumberOfFlavors } from '../../../../data/flavorHandler';\r\nimport Flavor from '../../../../dataTypes/flavor';\r\nimport ProductDetail from '../../../../dataTypes/ProductDetail';\r\nimport ProductDetailRecipiente from '../../../../dataTypes/ProductDetailRecipiente';\r\nimport ItemChooser from './itemChoser'\r\n\r\ninterface IProps {\r\n  id: string;\r\n  setProductDetail(pd: ProductDetail): any;\r\n}\r\n\r\nconst ItemChoserContainer: React.FC<IProps> = ({id, setProductDetail}) => {\r\n  const [flavors, setFlavors] = useState<Flavor[]>([]);\r\n  const [selectedFlavors, setSelectedFlavors] = useState<Flavor[]>([]);\r\n  const [numberOfFlavors, setNumberOfFlavors] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const setFlavorsIfMounted = (flavors: Flavor[]) => {\r\n      if (isMounted) setFlavors(flavors);\r\n    }\r\n\r\n    const setAmountIfMounted = (amount: number) => {\r\n      if (isMounted) setNumberOfFlavors(amount);\r\n    }\r\n    \r\n    try {\r\n      getNumberOfFlavors(setAmountIfMounted, id);\r\n      getFlavors(setFlavorsIfMounted);\r\n    }\r\n    catch(err: any) {\r\n      if (err instanceof Error) {\r\n        console.warn(err);\r\n      }\r\n    }\r\n    \r\n    return () => {isMounted = false}\r\n  }, [id])\r\n\r\n  //update details according to flavors showed on screen\r\n  useEffect(() => {\r\n    //slice passes the value by copy\r\n    setProductDetail(new ProductDetailRecipiente(selectedFlavors.slice()));\r\n  }, [selectedFlavors, setProductDetail])\r\n\r\n  return (\r\n    <ItemChooser \r\n      maxFlavors={numberOfFlavors}\r\n      imgWidth={500}\r\n      imgHeight={500*2/3}\r\n      itemId={id}\r\n      flavors={flavors}\r\n      selectedFlavors={selectedFlavors}\r\n      setSelectedFlavors={setSelectedFlavors}\r\n    />\r\n  )\r\n}\r\n\r\nexport default ItemChoserContainer"]},"metadata":{},"sourceType":"module"}