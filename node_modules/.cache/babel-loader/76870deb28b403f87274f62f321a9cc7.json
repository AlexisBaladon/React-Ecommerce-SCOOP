{"ast":null,"code":"import { collection, doc, getDoc, getDocs, getFirestore, query } from 'firebase/firestore';\nimport Flavor from '../dataTypes/flavor';\n\nconst createItemAux = document => {\n  let newFlavor = null; //Destructuring\n\n  const [id, title, pictureUrl] = [document.id, document.get(\"title\"), document.get(\"pictureUrl\")]; //If items are well defined\n\n  if (title === undefined || pictureUrl === undefined) {\n    throw new Error(\"Parámetros de items de base de datos erróneos\");\n  } else {\n    newFlavor = new Flavor(id, title, pictureUrl);\n  }\n\n  return newFlavor;\n};\n\nconst getFlavors = setFlavors => {\n  const db = getFirestore();\n  const itemCollection = query(collection(db, \"flavors\"));\n  getDocs(itemCollection).then(snapshot => {\n    const newFlavor = snapshot.docs.map(doc => {\n      return createItemAux(doc);\n    });\n    setFlavors(newFlavor);\n  });\n};\n\nconst getNumberOfFlavors = recipienteId => {\n  let numberOfItems = 0;\n  const db = getFirestore();\n  const itemRef = doc(db, \"numberOfFlavors\", recipienteId);\n  getDoc(itemRef).then(snapshot => {\n    if (snapshot.exists()) {\n      const amount = snapshot.get(\"amount\"); //If documents are well defined\n\n      if (amount === undefined) throw new Error(\"Parámetros de items de base de datos erróneos\");else numberOfItems = amount;\n    } else throw new Error(\"El item buscado no existe en la base de datos\");\n  });\n  return numberOfItems;\n};\n\nexport { getFlavors };","map":{"version":3,"sources":["F:/reactApp/heladeria-e-commerce-baladon/src/data/flavorHandler.ts"],"names":["collection","doc","getDoc","getDocs","getFirestore","query","Flavor","createItemAux","document","newFlavor","id","title","pictureUrl","get","undefined","Error","getFlavors","setFlavors","db","itemCollection","then","snapshot","docs","map","getNumberOfFlavors","recipienteId","numberOfItems","itemRef","exists","amount"],"mappings":"AAAA,SAAQA,UAAR,EAAoBC,GAApB,EAAoEC,MAApE,EAA4EC,OAA5E,EAAqFC,YAArF,EAA4GC,KAA5G,QAA+H,oBAA/H;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;AAGA,MAAMC,aAAa,GAAIC,QAAD,IAAsD;AAC5E,MAAIC,SAAS,GAAG,IAAhB,CAD4E,CAG5E;;AACA,QAAM,CAACC,EAAD,EAAKC,KAAL,EAAYC,UAAZ,IAEN,CAACJ,QAAQ,CAACE,EAAV,EAAcF,QAAQ,CAACK,GAAT,CAAa,OAAb,CAAd,EAAqCL,QAAQ,CAACK,GAAT,CAAa,YAAb,CAArC,CAFA,CAJ4E,CAQ5E;;AACA,MAAIF,KAAK,KAAKG,SAAV,IAAuBF,UAAU,KAAKE,SAA1C,EAAqD;AACnD,UAAM,IAAIC,KAAJ,CAAU,+CAAV,CAAN;AACD,GAFD,MAGK;AACHN,IAAAA,SAAS,GAAG,IAAIH,MAAJ,CAAWI,EAAX,EAAeC,KAAf,EAAsBC,UAAtB,CAAZ;AACD;;AAED,SAAOH,SAAP;AACC,CAjBD;;AAmBA,MAAMO,UAAU,GAAIC,UAAD,IAAgD;AACjE,QAAMC,EAAE,GAAGd,YAAY,EAAvB;AACA,QAAMe,cAAc,GAAGd,KAAK,CAACL,UAAU,CAACkB,EAAD,EAAI,SAAJ,CAAX,CAA5B;AAEAf,EAAAA,OAAO,CAACgB,cAAD,CAAP,CAAwBC,IAAxB,CAA6BC,QAAQ,IAAI;AACvC,UAAMZ,SAAS,GAAGY,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkBtB,GAAG,IAAI;AACzC,aAAOM,aAAa,CAACN,GAAD,CAApB;AACD,KAFiB,CAAlB;AAGAgB,IAAAA,UAAU,CAACR,SAAD,CAAV;AACD,GALD;AAMD,CAVD;;AAYA,MAAMe,kBAAkB,GAAIC,YAAD,IAAkC;AAC3D,MAAIC,aAAqB,GAAG,CAA5B;AACA,QAAMR,EAAE,GAAGd,YAAY,EAAvB;AACA,QAAMuB,OAAO,GAAG1B,GAAG,CAACiB,EAAD,EAAK,iBAAL,EAAwBO,YAAxB,CAAnB;AAEAvB,EAAAA,MAAM,CAACyB,OAAD,CAAN,CAAgBP,IAAhB,CAAqBC,QAAQ,IAAI;AAC/B,QAAIA,QAAQ,CAACO,MAAT,EAAJ,EAAuB;AACrB,YAAMC,MAA0B,GAAGR,QAAQ,CAACR,GAAT,CAAa,QAAb,CAAnC,CADqB,CAGrB;;AACA,UAAIgB,MAAM,KAAKf,SAAf,EAA0B,MAAM,IAAIC,KAAJ,CAAU,+CAAV,CAAN,CAA1B,KACKW,aAAa,GAAGG,MAAhB;AACN,KAND,MAOK,MAAM,IAAId,KAAJ,CAAU,+CAAV,CAAN;AACN,GATD;AAWA,SAAOW,aAAP;AACD,CAjBD;;AAmBE,SAAQV,UAAR","sourcesContent":["import {collection, doc, DocumentData, DocumentSnapshot, Firestore, getDoc, getDocs, getFirestore, orderBy, query, where} from 'firebase/firestore';\r\nimport Flavor from '../dataTypes/flavor';\r\n\r\n\r\nconst createItemAux = (document: DocumentSnapshot<DocumentData>): Flavor => {\r\nlet newFlavor = null;\r\n\r\n//Destructuring\r\nconst [id, title, pictureUrl]: \r\n[string | undefined, string | undefined, string | undefined] =\r\n[document.id, document.get(\"title\"), document.get(\"pictureUrl\")]\r\n\r\n//If items are well defined\r\nif (title === undefined || pictureUrl === undefined) {\r\n  throw new Error(\"Parámetros de items de base de datos erróneos\");\r\n}\r\nelse {\r\n  newFlavor = new Flavor(id, title, pictureUrl);\r\n}\r\n\r\nreturn newFlavor;\r\n}\r\n\r\nconst getFlavors = (setFlavors: (item: Flavor[]) => void): void => {\r\n  const db = getFirestore()\r\n  const itemCollection = query(collection(db,\"flavors\"));\r\n\r\n  getDocs(itemCollection).then(snapshot => {\r\n    const newFlavor = snapshot.docs.map(doc => {\r\n      return createItemAux(doc);\r\n    })\r\n    setFlavors(newFlavor);\r\n  })\r\n}\r\n\r\nconst getNumberOfFlavors = (recipienteId: string): number => {\r\n  let numberOfItems: number = 0;\r\n  const db = getFirestore()\r\n  const itemRef = doc(db, \"numberOfFlavors\", recipienteId);\r\n\r\n  getDoc(itemRef).then(snapshot => {\r\n    if (snapshot.exists()) {\r\n      const amount: number | undefined = snapshot.get(\"amount\");\r\n\r\n      //If documents are well defined\r\n      if (amount === undefined) throw new Error(\"Parámetros de items de base de datos erróneos\");\r\n      else numberOfItems = amount;\r\n    }\r\n    else throw new Error(\"El item buscado no existe en la base de datos\");\r\n  })\r\n\r\n  return numberOfItems\r\n}\r\n\r\n  export {getFlavors};"]},"metadata":{},"sourceType":"module"}